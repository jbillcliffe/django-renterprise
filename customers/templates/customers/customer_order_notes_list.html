{% extends "base.html" %}
{% load static %}

{% load i18n %}
{% block head_title %}{% trans "View Order Notes" %}{% endblock %}
{% block content %}

<div class="container-fluid" style="height: 100%; width:100%;">
    {% include 'side-nav.html' %}
    {% if user.is_authenticated %}

    {% if order_notes_list %}
    <div class="table-holder">
        <div class="centre-heading">
            <h2> View Order Notes For Order : {{ customer_order_id }} </h2>
            <hr class="renterprise" style="width:80%;">
        </div>
        <div class="table-row table-head">
            <div class="col-3">
                Date
            </div>
            <div class="col-8">
            </div>
            <div class="col-1">
                <a class="button-table add" 
                href="{% url 'customers:add_order_notes' customer_token=customer_token_value order_id=customer_order_id %}">
                <i class="fa-solid fa-comment-medical"></i></a>
            </div>
        </div>
        {% for order_note in order_notes_list %}
        <div class="table-row ">
            <div class="col-3">{{ order_note.created_on_by }}</div>
            <div class="col-8 note-row" >{{ order_note.note | safe }}</div>
            {% if perms.order.order_note %}
                <div class="col-1"><a class="button-table view" 
                    href="{% url 'customers:order_view_notes' customer_token=customer_token_value order_id=customer_order_id id=order_note.id %}">
                    <i class="fa-solid fa-magnifying-glass"></i></a></div>
            {% else %}
                <div class="col-1"></div>
            {% endif %}
        </div>
        {% endfor %}
        {% include 'paginate.html' %}
        <a class="button centre-align" href="{% url 'customers:customer_order_view' customer_token=customer_token_value order_id=customer_order_id %}">Return To Order</a>
    {% else %}
    <div class="content-holder centre">
        <div class="row">
            <h3 class="centre-heading" style="margin-bottom: 1.5rem;"> There are no order notes associated with this order. Add one now?</h3>
            <a class="button centre-align" href="{% url 'customers:add_order_notes' customer_token=customer_token_value order_id=customer_order_id %}" style="margin-bottom: 1.5rem;">Add Order Note</a>
            <a class="button centre-align" href="{% url 'customers:customer_order_view' customer_token=customer_token_value order_id=customer_order_id %}">Return To Order</a>
        </div>
        
    {% endif %}
    </div>
    
    {% else %}
    <div class="content-holder centre">
        <div class="row" style="width: 60%;">
            {% blocktrans %}
            <p>You need to be logged in to access the program.</p>
            <p>Log in to continue using this application.</p>
            {% endblocktrans %}
            <a class="button centre-align" href="{{ login_url }}">Log In</a>
        </div>
    </div>
    {% endif %}
</div>

<!-- index.html content ends here -->
{% endblock %}
